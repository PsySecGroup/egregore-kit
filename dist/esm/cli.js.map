{"version":3,"sources":["../../src/cli.ts","../../src/pipe.ts"],"sourcesContent":["#!/bin/bash\n\nimport { Command } from 'commander'\nimport { getPipeAsArray } from './pipe'\n\nconst { name, description, version } = require('../package.json')\n\nconst program = new Command()\n\nprogram\n  .name(name)\n  .description(description)\n  .version(version)\n\nprogram.command('split')\n  .description('')\n  .argument('<string>', 'string to split')\n  .option('--first', 'display just the first substring')\n  .option('-s, --separator <char>', 'separator character', ',')\n  .action((arg, { first, separator }) => {\n    const limit = first ? 1 : undefined;\n    console.log(arg.split(separator, limit));\n  })\n\nasync function main () {\n  await getPipeAsArray(async (chunk: string[]) => {\n    console.log(chunk)\n  })\n\n  program.parse()\n}\n\nmain()\n\n\n","export async function getPipeAsArray (onChunk: (chunk: string[]) => Promise<void>) {\n  return new Promise(resolve => {\n    \n    const stdin = process.openStdin()\n\n    stdin.on('data', async function(chunk) {\n      const result: string[] = []\n\n      chunk\n        .toString()\n        .split('\\n')\n        .forEach(line => {\n          const output = line.trim()\n\n          if (output === '') {\n            return\n          } else {\n            result.push(line)\n          }\n        })\n      \n      await onChunk(result)\n    })\n    \n    stdin.on('end', function () {\n      resolve(true)\n    })\n  })\n}\n"],"mappings":";u/CAEA,oCCFA,iBAAsC,EAA6C,CACjF,MAAO,IAAI,SAAQ,GAAW,CAE5B,GAAM,GAAQ,QAAQ,UAAU,EAEhC,EAAM,GAAG,OAAQ,eAAe,EAAO,CACrC,GAAM,GAAmB,CAAC,EAE1B,EACG,SAAS,EACT,MAAM;AAAA,CAAI,EACV,QAAQ,GAAQ,CAGf,AAAI,AAFW,EAAK,KAAK,IAEV,IAGb,EAAO,KAAK,CAAI,CAEpB,CAAC,EAEH,KAAM,GAAQ,CAAM,CACtB,CAAC,EAED,EAAM,GAAG,MAAO,UAAY,CAC1B,EAAQ,EAAI,CACd,CAAC,CACH,CAAC,CACH,CDvBA,GAAM,CAAE,OAAM,cAAa,WAAY,IAEjC,EAAU,GAAI,GAEpB,EACG,KAAK,CAAI,EACT,YAAY,CAAW,EACvB,QAAQ,CAAO,EAElB,EAAQ,QAAQ,OAAO,EACpB,YAAY,EAAE,EACd,SAAS,WAAY,iBAAiB,EACtC,OAAO,UAAW,kCAAkC,EACpD,OAAO,yBAA0B,sBAAuB,GAAG,EAC3D,OAAO,CAAC,EAAK,CAAE,QAAO,eAAgB,CACrC,GAAM,GAAQ,EAAQ,EAAI,OAC1B,QAAQ,IAAI,EAAI,MAAM,EAAW,CAAK,CAAC,CACzC,CAAC,EAEH,kBAAuB,CACrB,KAAM,GAAe,KAAO,IAAoB,CAC9C,QAAQ,IAAI,CAAK,CACnB,CAAC,EAED,EAAQ,MAAM,CAChB,CAEA,EAAK","names":[]}