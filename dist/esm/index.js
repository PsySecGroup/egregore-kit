var d=(n=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(n,{get:(t,e)=>(typeof require!="undefined"?require:t)[e]}):n)(function(n){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+n+'" is not supported')});import m from"easy-match";var p=class{constructor(t,e,s=0){typeof t=="string"?(this.method=t,this.endpoint=e,this.time=s):(this.method=t.method,this.endpoint=t.endpoint,this.time=t.time||0)}isMatch(t){return m([this.method],[t.method]).ismatch&&m([this.endpoint],[t.endpoint]).ismatch}};var u=class{constructor(t){this.type=t.type,this.content=t.content,this.context=t.context}};var c=class{constructor(t,e=0,s=0,o=0){if(typeof t=="number")this.type=t,this.content=e,this.context=s,this.time=o;else{let r=t;this.type=r.type,this.content=r.content,this.context=r.context,this.time=r.time}}addContext(t=1){this.context+=t}addContent(t=1){this.content+=t}toVector(){return new u(this)}};var f=d("is-negative-zero"),y=180/Math.PI;function h(n,t){return n.find(e=>t.isMatch(e))!==void 0}function q(n,t,e=360){let s=(t.context-n.context)/(t.content-n.content),r=Math.atan(s)*y%360;return r<0?r+=e:f(r)&&(r=180),r}var l=class{constructor(t){this.points={[0]:[],[1]:[],[2]:[],[3]:[]};let e=typeof t.social[0]!="string"?t.social:t.social.map(a=>{let i=a.split(" ");return new p(i[0],i[1])}),s=typeof t.personal[0]!="string"?t.personal:t.personal.map(a=>{let i=a.split(" ");return new p(i[0],i[1])}),o=typeof t.create[0]!="string"?t.create:t.create.map(a=>{let i=a.split(" ");return new p(i[0],i[1])}),r=typeof t.destroy[0]!="string"?t.destroy:t.destroy.map(a=>{let i=a.split(" ");return new p(i[0],i[1])});this.endpoints={social:e,personal:s,create:o,destroy:r}}addRequests(t){for(let e of t)h(this.endpoints.social,e)&&this.points[0].push(new c(0,0,1,e.time)),h(this.endpoints.personal,e)&&this.points[1].push(new c(1,0,-1,e.time)),h(this.endpoints.create,e)&&this.points[2].push(new c(2,1,0,e.time)),h(this.endpoints.destroy,e)&&this.points[3].push(new c(3,-1,0,e.time))}getPoints(){return[...this.points[0],...this.points[1],...this.points[2],...this.points[3]]}_reduce(t){if(t.length===0)return!1;let e=0,s=0;for(let r of t)s+=r.context,e+=r.content;return new c(t[0].type,e,s).toVector()}getVectors(t){let e=[this._reduce(this.points[0]),this._reduce(this.points[1]),this._reduce(this.points[2]),this._reduce(this.points[3])].filter(o=>o!==!1),s={temperature:0,pressure:0,vectors:e,angles:[]};for(let o=0,r=s.vectors.length;o<r;o++){let a=s.vectors[o],i=s.vectors[o+1]===void 0?s.vectors[0]:s.vectors[o+1];s.angles.push(q(a,i,360-o*90)),s.temperature+=a.context,s.pressure+=a.content}return s.temperature/=t,s.pressure/=t,s}};export{p as HttpRequest,l as Space};
//# sourceMappingURL=index.js.map